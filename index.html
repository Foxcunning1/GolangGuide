<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map相关</title>
</head>
<body>

<aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]-->
    <ul class="vp-sidebar-links">
        <li>
            <section class="vp-sidebar-group">
                <button class="vp-sidebar-header clickable" type="button">
                    <span class="font-icon icon iconfont icon-star" style=""></span>
                    <span class="vp-sidebar-title">必看</span><span class="vp-arrow end"></span>
                </button><!----></section>
        </li>
        <li>
            <section class="vp-sidebar-group">
                <button class="vp-sidebar-header clickable" type="button">
                    <span class="font-icon icon iconfont icon-interview" style=""></span>
                    <span class="vp-sidebar-title">面试准备</span><span class="vp-arrow end"></span>
                </button><!----></section>
        </li>
        <li>
            <section class="vp-sidebar-group">
                <button class="vp-sidebar-header clickable active" type="button">
                    <span class="font-icon icon iconfont icon-java" style=""></span>
                    <span class="vp-sidebar-title">Golang</span><span class="vp-arrow down"></span>
                </button>
                <ul class="vp-sidebar-links">
                    <li>
                        <section class="vp-sidebar-group"><p class="vp-sidebar-header active"><span
                                class="font-icon icon iconfont icon-basic"></span>
                            <span class="vp-sidebar-title">基础</span><!----></p>
                            <ul class="vp-sidebar-links">
                                <li>
                                    <a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active"
                                       href="./golang/basis/golang-basic-questions-01.html"
                                       aria-label="Golang基础常见面试题总结(上)"><!---->Golang基础常见面试题总结(上)
                                        <!----></a></li>
                                <li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page"
                                       href="./golang/basis/golang-basic-questions-02.html"
                                       aria-label="Golang基础常见面试题总结(中)"><!---->Golang基础常见面试题总结(中)
                                    <!----></a></li>
                                <li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page"
                                       href="./golang/basis/golang-basic-questions-03.html"
                                       aria-label="Golang基础常见面试题总结(下)"><!---->Golang基础常见面试题总结(下)
                                    <!----></a></li>
                                <li>
                                    <section class="vp-sidebar-group">
                                        <button class="vp-sidebar-header clickable" type="button"><span
                                                class="font-icon icon iconfont icon-star"></span><span
                                                class="vp-sidebar-title">重要知识点</span><span
                                                class="vp-arrow end"></span></button><!----></section>
                                </li>
                            </ul>
                        </section>
                    </li>
                    <li>
                        <section class="vp-sidebar-group"><p class="vp-sidebar-header"><span
                                class="font-icon icon iconfont icon-container"></span><span
                                class="vp-sidebar-title">集合</span><!----></p>
                            <ul class="vp-sidebar-links">
                                <li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page"
                                       href="/java/collection/java-collection-questions-01.html"
                                       aria-label="Java集合常见面试题总结(上)"><!---->Java集合常见面试题总结(上)
                                    <!----></a></li>
                                <li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page"
                                       href="/java/collection/java-collection-questions-02.html"
                                       aria-label="Java集合常见面试题总结(下)"><!---->Java集合常见面试题总结(下)
                                    <!----></a></li>
                                <li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page"
                                       href="/java/collection/java-collection-precautions-for-use.html"
                                       aria-label="Java集合使用注意事项总结"><!---->Java集合使用注意事项总结<!----></a>
                                </li>
                                <li>
                                    <section class="vp-sidebar-group">
                                        <button class="vp-sidebar-header clickable" type="button"><span
                                                class="font-icon icon iconfont icon-star"></span><span
                                                class="vp-sidebar-title">源码分析</span><span
                                                class="vp-arrow end"></span></button><!----></section>
                                </li>
                            </ul>
                        </section>
                    </li>
                    <li>
                        <section class="vp-sidebar-group"><p class="vp-sidebar-header"><span
                                class="font-icon icon iconfont icon-et-performance"></span><span
                                class="vp-sidebar-title">并发编程</span><!----></p>
                            <ul class="vp-sidebar-links">
                                <li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page"
                                       href="/java/concurrent/java-concurrent-questions-01.html"
                                       aria-label="Java并发常见面试题总结（上）"><!---->Java并发常见面试题总结（上）
                                    <!----></a></li>
                                <li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page"
                                       href="/java/concurrent/java-concurrent-questions-02.html"
                                       aria-label="Java并发常见面试题总结（中）"><!---->Java并发常见面试题总结（中）
                                    <!----></a></li>
                                <li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page"
                                       href="/java/concurrent/java-concurrent-questions-03.html"
                                       aria-label="Java并发常见面试题总结（下）"><!---->Java并发常见面试题总结（下）
                                    <!----></a></li>
                                <li>
                                    <section class="vp-sidebar-group">
                                        <button class="vp-sidebar-header clickable" type="button"><span
                                                class="font-icon icon iconfont icon-star"></span><span
                                                class="vp-sidebar-title">重要知识点</span><span
                                                class="vp-arrow end"></span></button><!----></section>
                                </li>
                            </ul>
                        </section>
                    </li>
                </ul>
            </section>
        </li>
    </ul><!--[--><!----><!--]-->
</aside>

<h1>Map相关</h1>
<h2>1. Map 使用注意的点，是否并发安全？</h2>
<p>
    <strong>注意事项：</strong>在使用 map 时需要确保先进行初始化，否则会引发 panic。对于 struct 作为 key，需要保证其对象在逻辑上是不可变的。<br>
    <strong>并发安全性：</strong>Go 语言的内置 map 类型在并发读写时不是线程安全的，会导致并发读写问题。为了保证并发安全，可以使用
    <code>sync.Map</code> 或者使用读写锁来实现。
</p>

<h2>2. Map 循环是有序的还是无序的？</h2>
<p>
    <strong>Map 循环是：</strong>无序的。即使键值对的插入顺序是确定的，但遍历 map 时元素的顺序并不是按照插入的顺序。如果需要有序的遍历，可以使用辅助的数据结构，比如
    <code>orderedmap</code>。
</p>

<h2>3. Map 中删除一个 key，它的内存会释放么？</h2>
<p>
    如果删除的元素是值类型，则 map 的内存不会自动释放。<br>
    如果删除的元素是引用类型，则 map 的内存会自动释放，但释放的内存是子元素应用类型的内存占用。<br>
    将 map 设置为 nil 后，内存被回收。
</p>

<h2>4. 怎么处理对 map 进行并发访问？有没有其他方案？ 区别是什么？</h2>
<p>
    <strong>方式一：</strong>使用内置 <code>sync.Map</code>，详细参考<a
        href="https://mbd.baidu.com/ma/s/7Hwd9yMcmbd.baidu.com/ma/s/7Hwd9yMc">sync.Map 文档</a>.<br>
    <strong>方式二：</strong>使用读写锁实现并发安全 map，详细参考<a
        href="https://mbd.baidu.com/ma/s/qO7b0VQUmbd.baidu.com/ma/s/qO7b0VQU">读写锁实现并发安全 map 文档</a>.<br>
    <strong>区别：</strong>sync.Map 使用起来更加简单，而使用读写锁需要手动加锁和解锁，但是读写锁的性能相对更高一些。
</p>

<h2>5. nil map 和空 map 有何不同？</h2>
<p>
    1）可以对未初始化的 map 进行取值，但取出来的东西是空：<br>
    var m1 map[string]string<br>
    fmt.Println(m1["1"])<br>
    2）不能对未初始化的 map 进行赋值，这样将会抛出一个异常：<br>
    未初始化的 map 是 nil，它与一个空 map 基本等价，只是 nil 的 map 不允许往里面添加值。<br>
    var m1 map[string]string<br>
    m1["1"] = "1"<br>
    panic: assignment to entry in nil map<br>
    因此，map 是 nil 时，取值是不会报错的（取不到而已），但增加值会报错。<br>
    其实，还有一个区别，delete 一个 nil map 会 panic，但是 delete 空 map 是一个空操作（并不会 panic）（这个区别在最新的 Go
    tips 中已经没有了，即：delete 一个 nil map 也不会 panic）。<br>
    3) 通过 fmt 打印 map 时，空 map 和 nil map 结果是一样的，都为 map[]。所以，这个时候别断定 map 是空还是 nil，而应该通过
    map == nil 来判断。<br>
    nil map 未初始化，空 map 是长度为空。<br>
</p>

<h2>6. map 的数据结构是什么？</h2>
<p>
    参考：<a href="https://www.topgoer.cn/docs/gozhuanjia/gozhuanjiamap">map 数据结构</a>.
</p>

<h2>7. 是怎么实现扩容？</h2>
<p>
    参考：<a href="https://www.topgoer.cn/docs/gozhuanjia/gozhuanjiamap">map 扩容</a>.
</p>

<h2>8. 查找过程</h2>
<p>
    参考：<a href="https://www.topgoer.cn/docs/gozhuanjia/gozhuanjiamap">map 查找过程</a>.
</p>

<h2>9. 插入过程</h2>
<p>
    参考：<a href="https://www.topgoer.cn/docs/gozhuanjia/gozhuanjiamap">map 插入过程</a>.
</p>

<h2>10. slices能作为map类型的key吗？</h2>
<p>
    参考：<a href="https://blog.csdn.net/lanyang123456/article/details/123765745">slices 作为 map key</a>.
</p>
</body>
</html>
